'use client'

import * as React from 'react'
import {
  animate,
  motion,
  useMotionValue,
  useTransform,
  type MotionValue,
} from 'framer-motion'

// The full sequence of path shapes, from the "P" shape to the open "paper" shape.
const pathKeyframes = [
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2118.3,25.1,2214.2,60C2370.6,116.9,2516.5,212.3,2634.2,330C2772.3,468.1,2780.5,466.1,2884.2,570C2956.1,642.1,3082.4,776.8,3174.2,870C3231.9,928.6,3259.1,953.2,3334.2,1030C3349.2,1045.4,3398.2,1093.7,3414.2,1110C3426.9,1123,3490.8,1186.3,3504.2,1200C3582.6,1280.3,3663,1370.5,3765.6,1476C3823.9,1535.9,4086.5,1770.4,4154.2,1840C4469.2,2115,4664.2,2315,4772,2540C4819.6,2639.3,4872.7,2739.5,4891,2848C4918.4,3010,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4248,3038,4220,2965C4114,2687,3931.2,2520,3644.2,2410C3557.2,2376,3594.2,2381,3044.2,2380C3044.2,2380,2674.2,2380,2534.2,2380C2483.4,2380,2430,2356,2394.2,2320C2358.5,2284.1,2335,2230.7,2335,2180C2335,2015,2334.3,1873.3,2335,1670C2335.6,1483,2337.6,1293.9,2304.2,1110C2291.1,1038.1,2259.4,967.4,2214.2,910C2162.9,845,2099.9,783.6,2024.2,750C1842.7,669.6,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2118.3,25.1,2214.2,60C2370.6,116.9,2516.5,212.3,2634.2,330C2772.3,468.1,2780.5,466.1,2884.2,570C2956.1,642.1,3082.4,776.8,3174.2,870C3231.9,928.6,3259.1,953.2,3334.2,1030C3349.2,1045.4,3398.2,1093.7,3414.2,1110C3426.9,1123,3490.8,1186.3,3504.2,1200C3582.6,1280.3,3663,1370.5,3765.6,1476C3823.9,1535.9,4086.5,1770.4,4154.2,1840C4469.2,2115,4664.2,2315,4772,2540C4819.6,2639.3,4872.7,2739.5,4891,2848C4918.4,3010,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4248,3038,4220,2965C4114,2687,3814.6,2441.1,3644.2,2310C3579.2,2260,3401.6,2128.4,3244.2,2080C3113.5,2039.9,2984.2,2080,2834.2,2080C2783.4,2080,2730,2056,2694.2,2020C2658.5,1984,2635,1930.7,2635,1880C2635,1715,2665.7,1642.3,2634.2,1530C2586.9,1361.6,2486.4,1211.5,2384.2,1070C2332.9,999.1,2264.2,910,2214.2,870C2149.5,818.3,2099.9,783.6,2024.2,750C1842.7,669.6,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2118.3,25.1,2214.2,60C2370.6,116.9,2516.5,212.3,2634.2,330C2772.3,468.1,2780.5,466.1,2884.2,570C2956.1,642.1,3082.4,776.8,3174.2,870C3231.9,928.6,3379.1,1073.2,3454.2,1150C3469.2,1165.4,3528.2,1233.7,3544.2,1250C3556.9,1263,3630.8,1336.3,3644.2,1350C3722.6,1430.3,3663,1370.5,3765.6,1476C3823.9,1535.9,4086.5,1770.4,4154.2,1840C4469.2,2115,4664.2,2315,4772,2540C4819.6,2639.3,4872.7,2739.5,4891,2848C4918.4,3010,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4248,3038,4220,2965C4114,2687,3801.5,2433,3644.2,2290C3589.2,2240,3454.2,2135,3324.2,2030C3225,1949.9,3216.6,1941.8,3094.2,1850C3054.2,1820,2980,1826,2944.2,1790C2908.5,1754,2917.4,1688.9,2885,1650C2864.2,1625,2819.2,1515,2744.2,1430C2628.4,1298.8,2534.2,1200,2414.2,1060C2357.2,993.6,2264.2,910,2214.2,870C2149.5,818.3,2099.9,783.6,2024.2,750C1842.7,669.6,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2129.5,20.4,2232.2,48C2392.6,93.1,2544.7,169.8,2674.2,264C2811.3,374.6,2844.6,372.9,2954.2,456C3045.1,513.7,3179.4,621.5,3286.2,696C3359,742.9,3419.4,791.8,3494.2,824C3563.7,853.9,3643.1,865.4,3704.2,910C3755.6,947.5,3797.1,1017,3844.2,1070C3891.6,1123.3,3932.3,1191.1,3984.2,1250C4095.7,1376.5,4201,1488.8,4307,1620C4482.5,1837.1,4674.2,2090,4764.2,2296C4822.7,2430,4881.8,2579.6,4896.5,2728.4C4918.4,2935.5,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4250.4,3045.9,4228,2954C4143.2,2687.6,4035.1,2465.2,3924.2,2296C3872.8,2217.7,3849.2,2180,3734.2,2040C3651.9,1939.8,3550.7,1808.6,3503.3,1758C3374.2,1620,3453.1,1703.4,3324.2,1570C3266.2,1510,3213.9,1458.4,3174.2,1430C3104.2,1380,2972.2,1293.5,2854.2,1220.8C2674.2,1110,2676.2,1108,2474.2,980C2400.7,933.4,2303,862,2238.3,830C2169.9,788.6,2113.4,760.8,2036.2,734C1854.4,669.6,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2151.9,10.9,2268.2,24C2436.7,45.6,2575.1,82.6,2734.2,130C2854.2,165.8,2999.8,211.8,3114.2,240C3254.3,274.5,3373.5,310.7,3510.2,348C3613.2,371.4,3710.1,395.9,3814.2,412C3945.6,426.9,4073.6,432.7,4209.2,455C4261.8,473.8,4311.7,519.3,4354.2,565C4395.4,609.5,4425.3,670.5,4451.3,725C4507,918.3,4539.2,1025,4584.2,1180C4645.5,1391.2,4695.2,1609.6,4744.2,1825C4794.4,2045.9,4849.2,2220,4884.2,2480C4925.2,2785.2,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4255.2,3061.8,4244,2932C4201.6,2688.8,4189.6,2514.6,4134.2,2320C4108.5,2174.2,4055.1,1991.2,4014.2,1825C3972.4,1655.4,3936.5,1479.8,3881.7,1314C3860.6,1250.1,3846.1,1234.8,3764.2,1150C3717.5,1101.7,3664.4,1064.2,3619.2,1050C3436.7,1025,3256.1,982.3,3054.2,940C2911.6,910.2,2766.8,889,2589.2,825C2490.9,801.7,2380.5,766,2286.7,750C2210.6,729.3,2140.6,715.4,2060.2,702C1877.6,669.8,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
  'M664.2,4920C664.2,4125,664.2,2560,664.2,2560C664.2,2560,664.2,910,664.2,200C664.2,149.2,688.3,95.9,724.2,60C760.1,24.1,813.4,0,864.2,0C1179.2,0,1304.2,0,1534.2,0C1764.2,0,1787.7,-7.8,1914.2,0C2016,6.2,2174.2,1.4,2304.2,0C2480.8,-1.9,2657.5,-0.5,2834.2,0C2967.5,.4,3100.8,.1,3234.2,0C3400.8,-0.1,3567.5,0,3734.2,0C3867.5,0,4000.8,0,4134.2,0C4327.5,0,4504.2,0,4714.2,0C4768,0,4826.4,21.6,4864.2,60C4899.3,95.7,4918.4,150,4918.4,200C4918.4,460,4918.9,556.6,4918.4,740C4917.8,930.1,4921,1130,4918.4,1320C4914.1,1630,4918.4,1940,4918.4,2250C4918.4,2637.7,4918.4,3224.5,4918.4,3413C4918.4,3635,4911.4,3859.1,4862,4075C4839,4175.4,4796,4272.5,4740,4359C4613.9,4553.6,4445.2,4720.5,4268,4870C4122.8,4992.6,3934.8,5086.8,3745,5097C3319.2,5120,3718,5117,2339,5120C2339,5120,1334.2,5120,864.2,5120C812,5120,760.3,5097.7,724.2,5060C691.2,5025.5,664.2,4967.7,664.2,4920ZM3644.2,4420C3886,4402.1,4084.6,4156.8,4189,3938C4265.1,3778.6,4260,3718,4260,3413C4260,3170,4260,3077.7,4260,2910C4260,2690,4260,2470,4260,2250C4260,2036.7,4260,1823.3,4260,1610C4260,1363.3,4260,1110,4260,870C4260,819.8,4239.1,766.2,4204.2,730C4168.9,693.5,4114.9,670,4064.2,670C3769.2,670,3464.2,670,3164.2,670C3010.8,670,2857.5,670,2704.2,670C2581.1,670,2458.1,670,2335,670C2251.4,670,2167.8,670,2084.2,670C1900.8,670,1714.2,670,1534.2,670C1483.4,670,1430.1,694.1,1394.2,730C1358.3,765.9,1334.2,819.2,1334.2,870C1334.2,1110,1334.2,556,1334.2,2560C1334.2,4308,1334.2,3980,1334.2,4250C1334.2,4302.7,1346.9,4362.7,1384.2,4400C1421.4,4437.3,1481.5,4450,1534.2,4450C1809.2,4450,2339,4450,2339,4450C2339,4450,3239.2,4450,3644.2,4420Z',
]

/**
 * A hook that provides the logic for the interactive logo animation.
 * It returns the animated path `d` attribute and the hover event handlers.
 * @param initialState - The initial state of the logo ('open' or 'closed'). Defaults to 'closed'.
 */
export function useInteractiveLogo(initialState: 'open' | 'closed' = 'closed') {
  const [isMounted, setIsMounted] = React.useState(false)
  // A motion value to track animation progress, from 0 ("P" shape) to 5 ("paper" shape).
  const progress = useMotionValue(0)

  React.useEffect(() => {
    setIsMounted(true)
  }, [])

  const animationHandlers = {
    onHoverStart: () => {
      animate(progress, 5, { duration: 0.55, ease: 'easeInOut' })
    },
    onHoverEnd: () => {
      animate(progress, 0, { duration: 0.55, ease: 'easeInOut' })
    },
  }

  const pathIndices = pathKeyframes.map((_, i) => i)
  const pathD = useTransform(progress, pathIndices, pathKeyframes)

  return { isMounted, pathD, animationHandlers }
}

interface LogoIconProps {
  pathD: MotionValue<string>
  isMounted: boolean
  className?: string
}

export function LogoIcon({ pathD, isMounted, className }: LogoIconProps) {
  return (
    <motion.svg
      viewBox="0 0 5765 5765"
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      style={{ display: 'block' }}
    >
      <motion.path
        d={pathD}
        fill="currentColor"
      />
    </motion.svg>
  )
}

interface AnimatedLogoProps {
  size?: number
  className?: string
}

export function AnimatedLogo({ size = 28, className }: AnimatedLogoProps) {
  const { pathD, animationHandlers } = useInteractiveLogo('closed')

  return (
    <motion.div
      {...animationHandlers}
      className={`flex items-center justify-center cursor-pointer ${className || ''}`}
      style={{ width: size, height: size }}
    >
      <motion.svg
        viewBox="0 0 5765 5765"
        xmlns="http://www.w3.org/2000/svg"
        className="w-full h-full"
        style={{ display: 'block' }}
      >
        <motion.path
          d={pathD}
          className="fill-current"
        />
      </motion.svg>
    </motion.div>
  )
}
